% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_hierarchy.R
\name{construct_S}
\alias{construct_S}
\title{Construct a summing matrix for hierarchical time series}
\usage{
construct_S(structure, ascending = TRUE, sparse = TRUE)
}
\arguments{
\item{structure}{List whose first element is an integer vector of bottom block sizes,
and each subsequent element is a list of integer vectors indicating
which blocks to merge at that level.}

\item{ascending}{Logical; if TRUE (default), the S matrix is ordered from bottom to top.}

\item{sparse}{Logical; if TRUE (default), returns a sparse dgCMatrix (from Matrix).}
}
\value{
The S matrix (rows = all aggregation levels, top down, then bottom identity).
}
\description{
Accepts a single `structure` describing all levels: the bottom block sizes and
how to merge them successively into upper levels.
}
\examples{
S <- construct_S(
  structure = list(
    # bottom: 4 groups of size 3
    c(3,3,3,3),
    # next: merge blocks 1+2, merge 3+4
    list(c(1,2), c(3,4)),
    # top: merge the two groups
    list(c(1,2))
  )
)

}
